#!/bin/bash

git fetch origin

if ! git diff --quiet HEAD @{u}; then
  echo "üî¥ Cambios remotos detectados:"

  if ! git pull; then
    echo "‚ùå Conflicto detectado al hacer pull --rebase:"
    echo "   - Resuelve los conflictos manualmente"
    echo "   - Luego ejecuta: git rebase --continue"
    echo "   - Finalmente recupera cambios con: git stash pop"
    exit 1
  fi
  
  echo "‚úÖ Sincronizaci√≥n completada. Ahora puedes hacer commit:"
  git status --short
  exit 0  # Sale del hook para que vuelvas a intentar el commit
fi